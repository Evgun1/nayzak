version: "3.5"

services:
    postgres:
        container_name: comforty-db
        image: postgres:16-alpine
        environment:
            POSTGRES_USER: ${POSTGRES_USER}
            POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
            PGDATA: /data/postgres
        volumes:
            - ./docker/postgres:/var/lib/postgresql/data
        ports:
            - "5434:5432"
        networks:
            - comforty
        restart: unless-stopped
    pgadmin:
        container_name: comforty-pg-admin
        image: dpage/pgadmin4
        environment:
            PGADMIN_DEFAULT_EMAIL: ${PGADMIN_DEFAULT_EMAIL}
            PGADMIN_DEFAULT_PASSWORD: ${PGADMIN_DEFAULT_PASSWORD}
        volumes:
            - ./docker/pgadmin:/var/lib/pgadmin
        ports:
            - "5051:80"
        networks:
            - comforty
        restart: unless-stopped
        user: "${UID}:${GID}"
    # redis:
    #     image: redis:7.2
    #     container_name: redis-nayzak
    #     environment:
    #         REDIS_PASSWORD: ${REDIS_PASSWORD}
    #         REDIS_DATABASES: ${REDIS_DATABASES}
    #     ports:
    #         - "5454:6379"
    #     volumes:
    #         - ./docker/redis:/var/lib/redis/data
    #     command: ["redis-server", "--requirepass", "${REDIS_PASSWORD}"]
    #     networks:
    #         - comforty
    #     restart: unless-stopped
    # zookeeper:
    #     image: wurstmeister/zookeeper:3.4.6
    #     container_name: zookeeper-nayzak
    #     environment:
    #       ZOOKEEPER_SERVER_ID: 1
    #       ZOOKEEPER_LISTENER_PORT: 2181
    #     ports:
    #       - "2181:2181"
    #     volumes:
    #         - ./docker/zookeeper:/zookeeper/data
    #     networks:
    #         - comforty
    #     restart: unless-stopped
    # kafka:
    #     image: wurstmeister/kafka:latest
    #     container_name: kafka-nayzak
       
    #     environment:
    #         KAFKA_ADVERTISED_LISTENER: INSIDE-KAFKA:9093
    #         KAFKA_LISTENER_SECURITY_PROTOCOL: PLAINTEXT
    #         KAFKA_LISTENER_NAME_INTERNAL: INSIDE-KAFKA
    #         KAFKA_LISTENER_PORT_INTERNAL: 9093
    #         KAFKA_LISTENER: INSIDE-KAFKA://0.0.0.0:9093
    #         KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
    #         KAFKA_LISTENER_NAME_EXTERNAL: EXTERNAL-KAFKA
    #         KAFKA_LISTENER_PORT_EXTERNAL: 9092
    #         KAFKA_ADVERTISED_LISTENER_PORT_EXTERNAL: 9092
    #         KAFKA_LISTENER_SECURITY_PROTOCOL_EXTERNAL: PLAINTEXT
    #         KAFKA_LISTENER_INTERNAL: INSIDE-KAFKA://0.0.0.0:9093
    #         KAFKA_ADVERTISED_HOST_NAME: localhost        
    #     ports:
    #         - "9092:9092"
    #         - "9093:9093"

    #     depends_on:
    #         - zookeeper
    #     volumes:
    #         - ./docker/kafka:/kafka/data
    #     networks:
    #         - comforty
    #     restart: unless-stopped

    # nginx:
    #     image: nginx:latest
    #     container_name: nginx-nayzak
    #     ports:
    #         - "8080:8080"
    #         # - "443:443"
    #     volumes:
    #         - ./docker/nginx/nginx.conf:/etc/nginx/nginx.conf
    #         # - ./docker/nginx:/etc/nginx/conf.d
    #         # - ./docker/certs:/etc/ssl/certs
    #         # - ./docker/certs/private:/etc/ssl/private
    #     networks:
    #         - comforty
    #     restart: unless-stopped


networks:
    comforty:
        driver: bridge
