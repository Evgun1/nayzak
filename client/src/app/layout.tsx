import type { Metadata } from "next";

import "./styles/globals.scss";
import StoreProvider from "./storeProvider";
import IconsSprite from "../components/icons/IconsSprite";
import Popup from "../components/popup/popup";
import Notification from "@/ui/notification/Notification";
import InitData from "@/components/initData";
import dynamic from "next/dynamic";
import HeaderSkeleton from "./(home)/header/skeleton/HeaderSkeleton";

export const metadata: Metadata = {
	title: "Create Next App",
	description: "Generated by create next app",
};

const HeaderDynamic = dynamic(() => import("./(home)/header/Header"), {
	ssr: true,
	loading: () => <HeaderSkeleton />,
});
const FooterDynamic = dynamic(() => import("./(home)/footer/Footer"), {
	ssr: true,
});

export default async function RootLayout(
	props: Readonly<{
		children: React.ReactNode;
	}>,
) {
	const { children } = props;

	return (
		<StoreProvider>
			<html lang="en">
				<head>
					<link
						rel="preconnect"
						href="https://fonts.googleapis.com"
					></link>
					<link
						rel="preconnect"
						href="https://fonts.gstatic.com"
						crossOrigin="anonymous"
					></link>
					<link
						href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,700;1,14..32,700&display=swap"
						rel="stylesheet"
					></link>
					<link
						href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,700;1,14..32,700&family=Space+Grotesk:wght@300..700&display=swap"
						rel="stylesheet"
					></link>
				</head>
				<body>
					<div id="root">
						<div id="popup"></div>
						<div id="overlay"></div>
						<div id="notification-container"></div>
						<HeaderDynamic />
						<main>{children}</main>
						<FooterDynamic />
					</div>
					<Popup />
					<Notification />
					<IconsSprite />
					<InitData />
				</body>
			</html>
		</StoreProvider>
	);
}
